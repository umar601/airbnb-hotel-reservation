

  <%- layout("./layout/boilerplate.ejs") %>
  <% block("head").append('<link rel="stylesheet" href="/view.css">') %>

   <% if (message && message.length > 0) { %>

    <h5 class="alert alert-success mt-3" style="display: flex; justify-content: space-between;align-items: center;width: 50%;margin: auto;"><%= message %><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" s></button></h5>
      
   
  <% } %>
  <div class="container">
    <!-- Title -->
    <div class="header">
      <h1><%= data.type %> in <%= data.city %></h1>
      <p class="subtitle">Hosted by <%= data.sellername %></p>
    </div>

    <!-- Hero image -->
    <div class="hero">
      <% if (data.images && data.images.length > 0) { %>
        <img src="<%= data.images[0] %>" alt="Main hotel photo">
      <% } %>
    </div>

    <!-- Extra images -->
    <% if (data.images && data.images.length > 1) { %>
      <div class="gallery">
        <% for (let image of data.images.slice(1)) { %>
          <img src="<%= image %>" alt="Hotel photo">
        <% } %>
      </div>
    <% } %>

    <!-- Details + Price Card -->
    <div class="details">
      <div class="details-left">
        <h3>Status</h3>
        <p><%= data.status %></p>

        <h3>Phone</h3>
        <p><%= data.sellno %></p>

        <h3>Location</h3>
        <p><%= data.location %></p>

        <h3>Description</h3>
        <p><%= data.description %></p>
      </div>

      <div class="price-card">
        <div class="price">$<%= data.price %> / night</div>
        <button>Reserve</button>
      </div>
    </div>
    <hr>
    <h3>Reviews Section</h3>
    <form action="/hotel/<%=data._id%>/review" novalidate class="needs-validation" method="post">
      <input type="range" name="rating" id="" required min="1" max="5" class="form-range" style="width:50%">
      <textarea name="comment" id="" class="form-control" style="width:50%; height:150px;" required placeholder="Post your review"></textarea>
       <div class="invalid-feedback">
        feedBack required !
       </div>
      <button type="submit" class="btn btn-success mt-3">Post Review</button>
    </form>
     <hr>
     <h3>Reviews</h3>
    <% if(data.review&&data.review.length>0){ %>
     
    <div class="row">
  <% for(review of data.review) { %>
    <div class="col-md-6 d-flex mb-4">
      <div class="card shadow-lg border-0 rounded-3 h-100 w-100" style="transition: transform 0.3s;">
        <div class="card-body p-4 d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <h5 class="card-title text-primary fw-bold mb-0">
              <i class="fas fa-user me-2"></i><%= review.createdBy %>
            </h5>
            <span class="badge bg-warning text-dark fs-6">
              <i class="fas fa-star me-1"></i><%= review.rating %>
            </span>
          </div>
          
          <p class="card-subtitle text-muted mb-3 small">
            <i class="far fa-clock me-1"></i>
            <%= review.createdAt.toString().split(" ").splice(0,4).join(" ") %>
          </p>
          
          <div class="card-text flex-grow-1">
            <p class="mb-0 lh-base" style="font-size: 1rem;">
              <%= review.comment %>
            </p>
          <!-- <p><%= review._id %></p> -->
          <form action="http://localhost:8080/hotel/<%=data._id%>/review/<%=review._id%>?_method=Delete"method="post" onsubmit="return confirm('Are you sure you want to delete this review?');">
          <button class="btn btn-danger mt-3" type="Submit">Delete Review</button>
          </form>
          </div>
        </div>
      </div>
    </div>
  <% } %>
</div>
<% }else{%>
  <div>
  <h1 class="d-flex justify-content-center">no reviews yet!</h1>
</div>
<%} %>


    <a href="/hotel" class="back-link">Back to Listings</a>
  </div>

  <% block("footer").append('<script src="/script.js"></script>') %>
</body>
</html>
